<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Configuration - APIS</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../assets/_mkdocstrings.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">APIS</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">APIS</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">Configuration</a>
                            </li>
                            <li class="nav-item">
                                <a href="../customization/" class="nav-link">Customization</a>
                            </li>
                            <li class="nav-item">
                                <a href="../development/" class="nav-link">Development</a>
                            </li>
                            <li class="nav-item">
                                <a href="../features/" class="nav-link">Additional Features</a>
                            </li>
                            <li class="nav-item">
                                <a href="../glossary/" class="nav-link">Glossary</a>
                            </li>
                            <li class="nav-item">
                                <a href="../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="nav-item">
                                <a href="../ontology/" class="nav-link">Create your ontology</a>
                            </li>
                            <li class="nav-item">
                                <a href="../reference/" class="nav-link">Reference</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../customization/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#apis_base_uri" class="nav-link">APIS_BASE_URI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#django-settings" class="nav-link">Django settings</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#rest_framework" class="nav-link">REST_FRAMEWORK</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#spectacular_settings" class="nav-link">SPECTACULAR_SETTINGS</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#apis_base_uri_1" class="nav-link">APIS_BASE_URI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#apis_next_prev" class="nav-link">APIS_NEXT_PREV</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#apis_anon_views_allowed" class="nav-link">APIS_ANON_VIEWS_ALLOWED</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#maintenance-middleware" class="nav-link">Maintenance middleware</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="apis_base_uri"><code>APIS_BASE_URI</code></h1>
<p>When you create an instance of an entity, a signal
[apis_core.apis_entities.models.create_default_uri][] is triggered that tries to generate a canonical URI for
the entity. The signal can be disabled by setting the
<code>CREATE_DEFAULT_URI</code> setting to <code>False</code>. If the signal runs, it creates
the canonical URI from two parts. The first part comes from the
<code>APIS_BASE_URI</code> setting. The second part comes from the reverse route of
<code>GetEntityGenericRoot</code> if that exists. If not, it uses the reverse
route of <code>apis_core:GetEntityGeneric</code>, which is defined in
<a class="autorefs autorefs-internal" title="urls" href="../reference/#apis_core.urls">apis_core.urls</a> and defaults to
<code>/entity/{pk}</code>. If the value of <code>APIS_BASE_URI</code> changes and URLs
containing the former <code>APIS_BASE_URI</code> remain in the database, then the
old <code>APIS_BASE_URI</code> value must be added to the setting
<code>APIS_FORMER_BASE_URIS</code>. <code>APIS_FORMER_BASE_URIS</code> is a list that contains
base URLs that were once used.</p>
<h1 id="django-settings">Django settings</h1>
<p>This section deals with the internal configuration of APIS. For
instructions on how to set it up please refer to
<a href="../installation/">installation</a>. All the settings described
here are part of the Django settings and can be set in the <code>settings.py</code>
file of your Django project.</p>
<h2 id="rest_framework">REST_FRAMEWORK</h2>
<p>APIS uses <a href="https://www.django-rest-framework.org/">Django
REST framework</a> for API
provisioning. REST framework-specific settings like the default page size
can be set here.</p>
<pre><code class="language-python">REST_FRAMEWORK[&quot;DEFAULT_AUTHENTICATION_CLASSES&quot;] = (
    &quot;rest_framework.permissions.DjangoModelPermissions&quot;,
)
</code></pre>
<p>Use the above default for allowing every user with permissions on a
model to change all model instances. Set
<code>"rest_framework.permissions.IsAuthenticated"</code> if every logged-in user
should have all permissions.</p>
<pre><code class="language-python">REST_FRAMEWORK[&quot;PAGE_SIZE&quot;] = 50
</code></pre>
<p>Sets the default page size the APIS REST API should deliver.</p>
<h2 id="spectacular_settings">SPECTACULAR_SETTINGS</h2>
<p>We provide a custom schema generator for spectacular. It is meant as a
drop in replacement for the <code>DEFAULT_GENERATOR_CLASS</code> of
drf-spectacular. You can use it like this:</p>
<pre><code class="language-python">SPECTACULAR_SETTINGS[&quot;DEFAULT_GENERATOR_CLASS&quot;] = 'apis_core.generic.generators.CustomSchemaGenerator'
</code></pre>
<p>Background:</p>
<p>The first reason is that we are using a custom converter
(<a class="autorefs autorefs-internal" title="ContenttypeConverter" href="../reference/#apis_core.generic.urls.ContenttypeConverter">apis_core.generic.urls.ContenttypeConverter</a>) to provide access to views and API views of different
content types. The default endpoint generator of drf-spectacular does
not know about this converter and therefore sees the endpoints using
this converter as <em>one</em> endpoint with one parameter called
<code>contenttype</code>. That is not what we want, so we have to do our own
enumeration: we iterate through all content types that inherit from
<code>GenericModel</code> and create schema endpoints for those programmatically.</p>
<p>The second reason is that the <code>autoapi</code> schema generator of DRF
Spectacular and our
<a class="autorefs autorefs-internal" title="ModelViewSet" href="../reference/#apis_core.generic.api_views.ModelViewSet">apis_core.generic.api_views.ModelViewSet</a> don't work well together. Our ModelViewSet needs the
dispatch method to set the model of the <code>ModelViewSet</code>, but this method
is not being called by the generator while doing the inspection, which
means the <code>ModelViewSet</code> does not know about the model it should work
with and can not provide the correct serializer and filter classes.
Therefore, we create the callback for the endpoints by hand and set the
model from there.</p>
<h2 id="apis_base_uri_1">APIS_BASE_URI</h2>
<pre><code class="language-python">APIS_BASE_URI = &quot;https://your-url-goes-here.com&quot;
</code></pre>
<p>Sets the base URI your instance should use. This is important as APIS
uses mainly URIs instead of IDs. This setting is used to generate the
canonical URI of an entity. It is included in the serializations of
entities (for example the JSON returned by the API) and therefore should be set
to the URL your production app is running on.</p>
<h2 id="apis_next_prev">APIS_NEXT_PREV</h2>
<pre><code class="language-python">APIS_NEXT_PREV = True
</code></pre>
<h2 id="apis_anon_views_allowed">APIS_ANON_VIEWS_ALLOWED</h2>
<pre><code class="language-python">APIS_ANON_VIEWS_ALLOWED = False
</code></pre>
<p>Sets whether list and detail views are accessible for anonymous (not
logged-in) users. If only a subset of the data should be exposed to the
anonymous user, use <a href="https://docs.djangoproject.com/en/stable/topics/db/managers/#custom-managers">custom
managers</a>.</p>
<h2 id="maintenance-middleware">Maintenance middleware</h2>
<p>APIS ships a maintenance middleware that you can use and activate to
enable a maintenance mode in your project. Maintenance mode means that
only superuser accounts can access the web interfaces; all other requests
are being answered with a simple maintenance mode page (the
<code>maintenance.html</code> template). To use the middleware, add</p>
<pre><code class="language-python">&quot;apis_core.core.middleware.MaintenanceMiddleware&quot;
</code></pre>
<p>to your <code>settings.MIDDLEWARE</code> list. To activate the maintenance mode
once the middleware is enabled, simply create a file <code>apis_maintenance</code>
in the directory the main Django process runs in. The path of the
maintenance file can be changed in settings:
<code>APIS_MAINTENANCE_FILE = "path of the file"</code></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
